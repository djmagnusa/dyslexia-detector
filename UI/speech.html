<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Speech Recognition</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
       
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    </head> 

    <body>
        <div class="container">

            <h1 class="text-center mt-5">
                Speech recognition
            </h1>

            <form>
                <div class="form-group">
                    <textarea id="textbox" rows="6" class="form-control"></textarea>

                </div>

                <div class="form-group">
                    <button id="start-btn" class="btn btn-danger btn-block">
                        Start
                    </button>

                    <p id="instructions">Press the start button</p>

                </div>
            </form>
        </div>
    </body>

    <script>

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition

            var recognition = new SpeechRecognition()

            var textbox = $("#textbox")

            var instructions = $("#instructions")

            var content = ''

            recognition.continuous = true

            recognition.onstart = function() {
            instructions.text("Voice recognition is on")
            }

            recognition.onspeechend = function () {
            instructions.text("No activity")
            }

            recognition.onerror = function() {
            instructions.text("Try again")
            }

            recognition.onresult = function (event) {
                var current = event.resultIndex;

                var transcript = event.results[current][0].transcript

                content += transcript

                textbox.val(content)
            } 

            $("#start-btn").click(function (event) {
                event.preventDefault()
                if(content.length) {
                content += ''
                }

                recognition.start()
            })

            textbox.on('input', function () {
                content = $(this).val()
            })

    </script>

</html>